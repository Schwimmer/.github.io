<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Record and Think!">
<meta property="og:type" content="website">
<meta property="og:title" content="Schwimmer&#39;s Blog">
<meta property="og:url" content="https://schwimmer.github.io/index.html">
<meta property="og:site_name" content="Schwimmer&#39;s Blog">
<meta property="og:description" content="Record and Think!">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Schwimmer&#39;s Blog">
<meta name="twitter:description" content="Record and Think!">





  
  
  <link rel="canonical" href="https://schwimmer.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Schwimmer's Blog</title>
  




  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143240576-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-143240576-1');
    }
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Schwimmer's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/19/知识图谱/Neo4j高并发/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/19/知识图谱/Neo4j高并发/" class="post-title-link" itemprop="url">Neo4j高并发</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-19 10:34:29 / 修改时间：10:39:32" itemprop="dateCreated datePublished" datetime="2019-07-19T10:34:29+08:00">2019-07-19</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/19/知识图谱/Neo4j高并发/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/19/知识图谱/Neo4j高并发/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="关于neo4j-超过千万节点的-性能问题"><a href="#关于neo4j-超过千万节点的-性能问题" class="headerlink" title="关于neo4j 超过千万节点的 性能问题"></a>关于neo4j 超过千万节点的 性能问题</h1><p><a href="http://neo4j.com.cn/topic/5822d8f3660dbde730da7087" target="_blank" rel="noopener"><strong>关于neo4j 超过千万节点的 性能问题</strong></a></p>
<blockquote>
<p>楼主今年在电力行业的项目中应用了neo4j，但是高并发的问题没有解决，只好部署成单机<br>前半年用的neo4j2.0版本的。用的spring-data-neo4j。<br>主要操作如下：<br>1.读取neo4j里面的拓扑节点（按级次遍历）,大致每次读出来大概150个节点，层级大致30层级以内<br>2.对拿出来的节点，进行打断关系重新连接，或修改属性值<br>3.把修改好的节点和关系再保存进去<br>这个过程（都加入了事务控制），虽然计算量有点多，所以想来咨询一下，<br>这个过程一开始到结束，cpu都高居不下，内存还好。<br>cpu高居不下后，并发就卡死，各种报错。也就不到20个并发。<br>求高手解惑，因为新项目也要用neo4j，而且数据量在2000W,要求并发  至少能达到100吧</p>
</blockquote>
<p>方案一： 购买企业版，搭建集群。社区版不适合用在生产环境<br>方案二：在业务逻辑上拆分数据，分别放在运行在不同电脑上的neo4j实例上（如果业务逻辑上无法拆分，就不要考虑了）<br>方案三：使用亚马逊云等云平台的neo4j 托管，就是运行在aws云上的neo4j实例，这个不用考虑性能问题，肯花钱绝对性能妥妥的，aws上使用neo4j ：<a href="https://neo4j.com/blog/neo4j-hosting-aws-graphenedb/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">https://neo4j.com/blog/neo4j-hosting-aws-graphenedb/?utm_source=tuicool&amp;utm_medium=referral</a><br>方案四：创建索引，等数据库优化</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/18/地理信息挖掘/空间分析算法的实现/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/18/地理信息挖掘/空间分析算法的实现/" class="post-title-link" itemprop="url">空间分析算法的实现</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-18 11:15:14 / 修改时间：11:26:41" itemprop="dateCreated datePublished" datetime="2019-07-18T11:15:14+08:00">2019-07-18</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/地理信息处理和挖掘/" itemprop="url" rel="index"><span itemprop="name">地理信息处理和挖掘</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/18/地理信息挖掘/空间分析算法的实现/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/18/地理信息挖掘/空间分析算法的实现/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="点集求凸包"><a href="#点集求凸包" class="headerlink" title="点集求凸包"></a>点集求凸包</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 凸包离散点的工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscretePointUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;b&gt;查找离散点集中的(minX, minY) (maxX, maxY)&lt;/b&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * 查找离散点集中的(minX, minY) (maxX, maxY)</span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>  ManerFan 2015年4月9日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   points    离散点集</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  [(minX, minY), (maxX, maxY)]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Point[] calMinMaxDots(<span class="keyword">final</span> List&lt;Point&gt; points) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == points || points.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> minX = points.get(<span class="number">0</span>).getX(), maxX = points.get(<span class="number">0</span>).getX();</span><br><span class="line">        <span class="keyword">double</span> minY = points.get(<span class="number">0</span>).getY(), maxY = points.get(<span class="number">0</span>).getY();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 这里存在优化空间，可以使用并行计算 */</span></span><br><span class="line">        <span class="keyword">for</span> (Point point : points) &#123;</span><br><span class="line">            <span class="keyword">if</span> (minX &gt; point.getX()) &#123;</span><br><span class="line">                minX = point.getX();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (maxX &lt; point.getX()) &#123;</span><br><span class="line">                maxX = point.getX();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (minY &gt; point.getY()) &#123;</span><br><span class="line">                minY = point.getY();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (maxY &lt; point.getY()) &#123;</span><br><span class="line">                maxY = point.getY();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Point ws = <span class="keyword">new</span> Point(minX, minY);</span><br><span class="line">        Point en = <span class="keyword">new</span> Point(maxX, maxY);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Point[] &#123; ws, en &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;b&gt;求矩形面积平方根&lt;/b&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * 以两个点作为矩形的对角线上的两点，计算其面积的平方根</span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>  ManerFan 2015年4月9日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   ws  西南点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   en  东北点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  矩形面积平方根</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calRectAreaSquare</span><span class="params">(Point ws, Point en)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == ws || <span class="keyword">null</span> == en) &#123;</span><br><span class="line">            <span class="keyword">return</span> .<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 为防止计算面积时float溢出，先计算各边平方根，再相乘 */</span></span><br><span class="line">        <span class="keyword">return</span> Math.sqrt(Math.abs(ws.getX() - en.getX()))</span><br><span class="line">                * Math.sqrt(Math.abs(ws.getY() - en.getY()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;b&gt;求两点之间的长度&lt;/b&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * 求两点之间的长度</span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>  ManerFan 2015年4月10日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   ws  西南点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   en  东北点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  两点之间的长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calLineLen</span><span class="params">(Point ws, Point en)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == ws || <span class="keyword">null</span> == en) &#123;</span><br><span class="line">            <span class="keyword">return</span> .<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ws.equals(en)) &#123;</span><br><span class="line">            <span class="keyword">return</span> .<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直角三角形的直边a</span></span><br><span class="line">        <span class="keyword">double</span> a = Math.abs(ws.getX() - en.getX());</span><br><span class="line">        <span class="comment">// 直角三角形的直边b</span></span><br><span class="line">        <span class="keyword">double</span> b = Math.abs(ws.getY() - en.getY());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 短直边</span></span><br><span class="line">        <span class="keyword">double</span> min = Math.min(a, b);</span><br><span class="line">        <span class="comment">// 长直边</span></span><br><span class="line">        <span class="keyword">double</span> max = Math.max(a, b);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 为防止计算平方时float溢出，做如下转换</span></span><br><span class="line"><span class="comment">         * √(min²+max²) = √((min/max)²+1) * abs(max)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">double</span> inner = min / max;</span><br><span class="line">        <span class="keyword">return</span> Math.sqrt(inner * inner + <span class="number">1.0</span>) * max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;b&gt;求两点间的中心点&lt;/b&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * 求两点间的中心点</span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>  ManerFan 2015年4月10日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   ws  西南点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   en  东北点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  两点间的中心点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Point <span class="title">calCerter</span><span class="params">(Point ws, Point en)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == ws || <span class="keyword">null</span> == en) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Point(ws.getX() + (en.getX() - ws.getX()) / <span class="number">2.0</span>, ws.getY()</span><br><span class="line">                + (en.getY() - ws.getY()) / <span class="number">2.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;b&gt;计算向量角&lt;/b&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * 计算两点组成的向量与x轴正方向的向量角</span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>  ManerFan 2015年4月17日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   s   向量起点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   d   向量终点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  向量角</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">angleOf</span><span class="params">(Point s, Point d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> dist = calLineLen(s, d);</span><br><span class="line">        <span class="keyword">double</span> zeroDouble = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dist &lt;= zeroDouble) &#123;</span><br><span class="line">            <span class="keyword">return</span> zeroDouble;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 直角三角形的直边a</span></span><br><span class="line">        <span class="keyword">double</span> x = d.getX() - s.getX();</span><br><span class="line">        <span class="comment">// 直角三角形的直边b</span></span><br><span class="line">        <span class="keyword">double</span> y = d.getY() - s.getY();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 1 2 象限 */</span></span><br><span class="line">        <span class="keyword">if</span> (y &gt;= zeroDouble) &#123;</span><br><span class="line">            <span class="keyword">return</span> Math.acos(x / dist);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">/* 3 4 象限 */</span></span><br><span class="line">            <span class="keyword">return</span> Math.acos(-x / dist) + Math.PI;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;b&gt;修正角度&lt;/b&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * 修正角度到 [0, 2PI]</span></span><br><span class="line"><span class="comment">     * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>  ManerFan 2015年4月17日</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>   angle   原始角度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>  修正后的角度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">reviseAngle</span><span class="params">(<span class="keyword">double</span> angle)</span> </span>&#123;</span><br><span class="line">        Double twoPi = <span class="number">2</span> * Math.PI;</span><br><span class="line">        Double zeroDouble = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">while</span> (angle &lt; zeroDouble) &#123;</span><br><span class="line">            angle += twoPi;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (angle &gt;= twoPi) &#123;</span><br><span class="line">            angle -= twoPi;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> angle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mljr.carthage.cluster.bounding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ListIterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现寻找一群离散点最小凸包算法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinimumBoundingPolygon</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LinkedList&lt;Point&gt; <span class="title">findSmallestPolygon</span><span class="params">(List&lt;Point&gt; ps)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == ps || ps.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Point corner = findStartPoint(ps);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == corner) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> minAngleDif, oldAngle = <span class="number">2</span> * Math.PI;</span><br><span class="line">        LinkedList&lt;Point&gt; bound = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            minAngleDif = <span class="number">2</span> * Math.PI;</span><br><span class="line"></span><br><span class="line">            bound.add(corner);</span><br><span class="line"></span><br><span class="line">            Point nextPoint = corner;</span><br><span class="line">            <span class="keyword">double</span> nextAngle = oldAngle;</span><br><span class="line">            <span class="keyword">for</span> (Point p : ps) &#123;</span><br><span class="line">                <span class="comment">// 已被加入边界链表的点</span></span><br><span class="line">                <span class="keyword">if</span> (p.founded) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 重合点</span></span><br><span class="line">                <span class="keyword">if</span> (p.equals(corner)) &#123;</span><br><span class="line">                    <span class="comment">/*if (!p.equals(bound.getFirst())) &#123;</span></span><br><span class="line"><span class="comment">                        p.founded = true;</span></span><br><span class="line"><span class="comment">                    &#125;*/</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">/* 当前向量与x轴正方向的夹角 */</span></span><br><span class="line">                <span class="keyword">double</span> currAngle = DiscretePointUtil.angleOf(corner, p);</span><br><span class="line">                <span class="comment">/* 两条向量之间的夹角（顺时针旋转的夹角） */</span></span><br><span class="line">                <span class="keyword">double</span> angleDif = DiscretePointUtil.reviseAngle(oldAngle - currAngle);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (angleDif &lt; minAngleDif) &#123;</span><br><span class="line">                    minAngleDif = angleDif;</span><br><span class="line">                    nextPoint = p;</span><br><span class="line">                    nextAngle = currAngle;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            oldAngle = nextAngle;</span><br><span class="line">            corner = nextPoint;</span><br><span class="line">            corner.founded = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">/* 判断边界是否闭合 */</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (!corner.equals(bound.getFirst()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bound;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查找起始点（保证y最大的情况下、尽量使x最小的点）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Point <span class="title">findStartPoint</span><span class="params">(List&lt;Point&gt; ps)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == ps || ps.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Point p = ps.get(<span class="number">0</span>);</span><br><span class="line">        ListIterator&lt;Point&gt; iter = ps.listIterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">            Point point = iter.next();</span><br><span class="line">            <span class="comment">/* 找到最靠上靠左的点 */</span></span><br><span class="line">            <span class="keyword">boolean</span> isPointAtLeftUp = point.getY() &gt; p.getY() || (point.getY() == p.getY() &amp;&amp; point.getX() &lt; p.getX());</span><br><span class="line">            <span class="keyword">if</span> (isPointAtLeftUp) &#123;</span><br><span class="line">                p = point;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="计算任意点构成的多边形面积"><a href="#计算任意点构成的多边形面积" class="headerlink" title="计算任意点构成的多边形面积"></a>计算任意点构成的多边形面积</h1><p>转自：<a href="https://www.cnblogs.com/TenosDoIt/p/4047211.html" target="_blank" rel="noopener">计算任意多边形的面积</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point2d</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">    <span class="keyword">double</span> y;</span><br><span class="line">    Point2d(<span class="keyword">double</span> xx, <span class="keyword">double</span> yy): x(xx), y(yy)&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//计算任意多边形的面积，顶点按照顺时针或者逆时针方向排列</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">ComputePolygonArea</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Point2d&gt; &amp;points)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> point_num = points.size();</span><br><span class="line">    <span class="keyword">if</span>(point_num &lt; <span class="number">3</span>)<span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">double</span> s = points[<span class="number">0</span>].y * (points[point_num<span class="number">-1</span>].x - points[<span class="number">1</span>].x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; point_num; ++i)</span><br><span class="line">        s += points[i].y * (points[i<span class="number">-1</span>].x - points[(i+<span class="number">1</span>)%point_num].x);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>(s/<span class="number">2.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/17/知识图谱/【转】Neo4j提升查询效率/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/17/知识图谱/【转】Neo4j提升查询效率/" class="post-title-link" itemprop="url">【转】Neo4j提升查询效率</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-17 18:39:05 / 修改时间：18:40:25" itemprop="dateCreated datePublished" datetime="2019-07-17T18:39:05+08:00">2019-07-17</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/17/知识图谱/【转】Neo4j提升查询效率/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/17/知识图谱/【转】Neo4j提升查询效率/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://blog.csdn.net/u013946356/article/details/82628265" target="_blank" rel="noopener">关于neo4j亿级数据提高查询效率的方法总结</a></p>
<p><a href="https://blog.csdn.net/superman_xxx/article/details/89490586" target="_blank" rel="noopener">NEO4J亿级数据全文索引构建优化</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/17/知识图谱/Neo4j配置/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/17/知识图谱/Neo4j配置/" class="post-title-link" itemprop="url">【转】Neo4j配置</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-17 18:24:44 / 修改时间：18:25:34" itemprop="dateCreated datePublished" datetime="2019-07-17T18:24:44+08:00">2019-07-17</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/17/知识图谱/Neo4j配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/17/知识图谱/Neo4j配置/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转自：<a href="http://neo4j.com.cn/topic/5a0afb7b59d57b3653caa725" target="_blank" rel="noopener"><strong>neo4j配置</strong></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># 修改第9行，去掉#，修改数据库名</span><br><span class="line">dbms.active_database=wkq_graph.db</span><br><span class="line"></span><br><span class="line"># 修改第12行，去掉#。修改路径，改成绝对路径</span><br><span class="line">dbms.directories.data=C:/WorkSpaces/Neo4j/</span><br><span class="line"># 修改9行和12行后，neo4j数据存放在 C:/WorkSpaces/Neo4j/databases/wkq_graph.db，没错，多了一个databases</span><br><span class="line"></span><br><span class="line"># 修改第22行，在前面加个#，load csv时允许从任意路径读取文件</span><br><span class="line">#dbms.directories.import=import</span><br><span class="line"></span><br><span class="line"># 修改第26行，删除#后，连接数据库不需要密码</span><br><span class="line">#dbms.security.auth_enabled=false</span><br><span class="line"></span><br><span class="line"># 修改35行和36行，设置JVM初始堆内存和JVM最大堆内存，这是在我自己电脑上测试用，生产环境自己慢慢调</span><br><span class="line"># 建议生产环境给的JVM最大堆内存越大越好，但是要小于机器的物理内存</span><br><span class="line">dbms.memory.heap.initial_size=1024</span><br><span class="line">dbms.memory.heap.max_size=2048m</span><br><span class="line"></span><br><span class="line"># 修改46行，可以认为这个是缓存，如果机器配置高，这个越大越好</span><br><span class="line">dbms.memory.pagecache.size=10g</span><br><span class="line"></span><br><span class="line"># 修改54行，去掉改行的#，可以远程通过ip访问neo4j数据库</span><br><span class="line">dbms.connectors.default_listen_address=0.0.0.0</span><br><span class="line"></span><br><span class="line"># 默认 bolt端口是7687，http端口是7474，https关口是7473，不修改下面3项也可以</span><br><span class="line"># 修改71行，去掉#，设置http端口为7474，端口可以自定义，只要不和其他端口冲突就行</span><br><span class="line">#dbms.connector.bolt.listen_address=:7687</span><br><span class="line"></span><br><span class="line"># 修改75行，去掉#，设置http端口为7474，端口可以自定义，只要不和其他端口冲突就行</span><br><span class="line">dbms.connector.http.listen_address=:7474</span><br><span class="line"></span><br><span class="line"># 修改79行，去掉#，设置http端口为7473，端口可以自定义，只要不和其他端口冲突就行</span><br><span class="line">dbms.connector.https.listen_address=:7473</span><br><span class="line"></span><br><span class="line"># 修改227行，去掉#，允许从远程url来load csv</span><br><span class="line">dbms.security.allow_csv_import_from_file_urls=true</span><br><span class="line"></span><br><span class="line"># 修改233行，允许使用neo4j-shell，类似于mysql 命令行之类的</span><br><span class="line">dbms.shell.enabled=true</span><br><span class="line"></span><br><span class="line"># 修改235行，去掉#，设置连接neo4j-shell的端口，一般都是localhost或者127.0.0.1，这样安全，其他地址的话，一般使用https就行</span><br><span class="line">dbms.shell.host=127.0.0.1</span><br><span class="line"></span><br><span class="line"># 修改237行，去掉#，设置neo4j-shell端口，端口可以自定义，只要不和其他端口冲突就行</span><br><span class="line">dbms.shell.port=1337</span><br><span class="line"></span><br><span class="line"># 修改241行，设置neo4j可读可写</span><br><span class="line">dbms.read_only=false</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line">For more details and a complete list of settings, please see https://neo4j.com/docs/operations-manual/current/reference/configuration-settings/</span><br><span class="line"></span><br><span class="line"># 如果想自定义neo4j数据库数据的存储路径，要同时修改dbms.active_database 和 dbms.directories.data 两项配置，</span><br><span class="line"># 修改配置后，数据会存放在$&#123;dbms.directories.data&#125;/databases/$&#123;dbms.active_database&#125; 目录下</span><br><span class="line"># 安装的数据库的名称，默认使用$&#123;NEO4J_HOME&#125;/data/databases/graph.db目录</span><br><span class="line"># The name of the database to mount  </span><br><span class="line">#dbms.active_database=graph.db</span><br><span class="line"></span><br><span class="line">#安装Neo4j数据库的各个配置路径，默认使用$NEO4J_HOME下的路径</span><br><span class="line">#Paths of directories in the installation. </span><br><span class="line"># 数据路径</span><br><span class="line">#dbms.directories.data=data  </span><br><span class="line"># 插件路径</span><br><span class="line">#dbms.directories.plugins=plugins  </span><br><span class="line">#dbms.directories.certificates=certificates  证书路径</span><br><span class="line">#dbms.directories.logs=logs 日志路径</span><br><span class="line">#dbms.directories.lib=lib jar包路径</span><br><span class="line">#dbms.directories.run=run 运行路径</span><br><span class="line"></span><br><span class="line">#默认情况下想load csv文件，只能把csv文件放到$&#123;NEO4J_HOME&#125;/import目录下，把下面的#删除后，可以在load csv时使用绝对路径，这样可能不安全</span><br><span class="line">#This setting constrains all `LOAD CSV` import files to be under the `import` directory. Remove or comment it out to allow files to be loaded from anywhere in the filesystem; this introduces possible security problems. See the `LOAD CSV` section of the manual for details.  </span><br><span class="line">#此设置将所有“LOAD CSV”导入文件限制在`import`目录下。删除注释允许从文件系统的任何地方加载文件;这引入了可能的安全问题。</span><br><span class="line">dbms.directories.import=import</span><br><span class="line"></span><br><span class="line">#把下面这行的#删掉后，连接neo4j数据库时就不用输密码了</span><br><span class="line">#Whether requests to Neo4j are authenticated. 是否对Neo4j的请求进行了身份验证。</span><br><span class="line">#To disable authentication, uncomment this line 要禁用身份验证，请取消注释此行。</span><br><span class="line">#dbms.security.auth_enabled=false</span><br><span class="line"></span><br><span class="line">#Enable this to be able to upgrade a store from an older version. 是否兼容以前版本的数据</span><br><span class="line">dbms.allow_format_migration=true</span><br><span class="line"></span><br><span class="line">#Java Heap Size: by default the Java heap size is dynamically calculated based on available system resources. Java堆大小：默认情况下，Java堆大小是动态地根据可用的系统资源计算。</span><br><span class="line">#Uncomment these lines to set specific initial and maximum heap size. 取消注释这些行以设置特定的初始值和最大值</span><br><span class="line">#dbms.memory.heap.initial_size=512m</span><br><span class="line">#dbms.memory.heap.max_size=512m</span><br><span class="line"></span><br><span class="line">#The amount of memory to use for mapping the store files, in bytes (or kilobytes with the &apos;k&apos; suffix, megabytes with &apos;m&apos; and gigabytes with &apos;g&apos;). 用于映射存储文件的内存量（以字节为单位）千字节带有&apos;k&apos;后缀，兆字节带有&apos;m&apos;，千兆字节带有&apos;g&apos;）。</span><br><span class="line">#If Neo4j is running on a dedicated server, then it is generally recommended to leave about 2-4 gigabytes for the operating system, give the JVM enough heap to hold all your transaction state and query context, and then leave the rest for the page cache. 如果Neo4j在专用服务器上运行，那么通常建议为操作系统保留大约2-4千兆字节，为JVM提供足够的堆来保存所有的事务状态和查询上下文，然后保留其余的页面缓存 。</span><br><span class="line">#The default page cache memory assumes the machine is dedicated to running Neo4j, and is heuristically set to 50% of RAM minus the max Java heap size.  默认页面缓存存储器假定机器专用于运行Neo4j，并且试探性地设置为RAM的50％减去最大Java堆大小。</span><br><span class="line">#dbms.memory.pagecache.size=10g</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Network connector configuration</span><br><span class="line"></span><br><span class="line">#With default configuration Neo4j only accepts local connections. Neo4j默认只接受本地连接(localhost)</span><br><span class="line">#To accept non-local connections, uncomment this line:  要接受非本地连接，请取消注释此行</span><br><span class="line">dbms.connectors.default_listen_address=0.0.0.0 (这是删除#后的配置，可以通过ip访问)</span><br><span class="line"></span><br><span class="line">#You can also choose a specific network interface, and configure a non-default port for each connector, by setting their individual listen_address. 还可以选择特定的网络接口，并配置非默认值端口，设置它们各自的listen_address</span><br><span class="line"></span><br><span class="line">#The address at which this server can be reached by its clients. This may be the server&apos;s IP address or DNS name, or it may be the address of a reverse proxy which sits in front of the server. This setting may be overridden for individual connectors below. 客户端可以访问此服务器的地址。这可以是服务器的IP地址或DNS名称，或者可以是位于服务器前面的反向代理的地址。此设置可能会覆盖以下各个连接器。</span><br><span class="line">#dbms.connectors.default_advertised_address=localhost</span><br><span class="line"></span><br><span class="line">#You can also choose a specific advertised hostname or IP address, and configure an advertised port for each connector, by setting their individual advertised_address. 您还可以选择特定广播主机名或IP地址，</span><br><span class="line">为每个连接器配置通告的端口，通过设置它们独特的advertised_address。</span><br><span class="line"></span><br><span class="line">#Bolt connector 使用Bolt协议</span><br><span class="line">dbms.connector.bolt.enabled=true</span><br><span class="line">dbms.connector.bolt.tls_level=OPTIONAL</span><br><span class="line">dbms.connector.bolt.listen_address=:7687</span><br><span class="line"></span><br><span class="line">#HTTP Connector. There must be exactly one HTTP connector. 使用http协议</span><br><span class="line">dbms.connector.http.enabled=true</span><br><span class="line">dbms.connector.http.listen_address=:7474</span><br><span class="line"></span><br><span class="line">#HTTPS Connector. There can be zero or one HTTPS connectors. 使用https协议</span><br><span class="line">dbms.connector.https.enabled=true</span><br><span class="line">dbms.connector.https.listen_address=:7473</span><br><span class="line"></span><br><span class="line">#Number of Neo4j worker threads. Neo4j线程数</span><br><span class="line">#dbms.threads.worker_count=</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#Logging configuration  日志配置</span><br><span class="line"></span><br><span class="line">#To enable HTTP logging, uncomment this line  要启用HTTP日志记录，请取消注释此行</span><br><span class="line">dbms.logs.http.enabled=true</span><br><span class="line"></span><br><span class="line">#Number of HTTP logs to keep. 要保留的HTTP日志数</span><br><span class="line">#dbms.logs.http.rotation.keep_number=5</span><br><span class="line"></span><br><span class="line">#Size of each HTTP log that is kept. 每个HTTP日志文件的大小</span><br><span class="line">dbms.logs.http.rotation.size=20m</span><br><span class="line"></span><br><span class="line">#To enable GC Logging, uncomment this line 要启用GC日志记录，请取消注释此行</span><br><span class="line">#dbms.logs.gc.enabled=true</span><br><span class="line"></span><br><span class="line">#GC Logging Options see http://docs.oracle.com/cd/E19957-01/819-0084-10/pt_tuningjava.html#wp57013 for more information.  GC日志记录选项 有关详细信息，请参见http://docs.oracle.com/cd/E19957-01/819-0084-10/pt_tuningjava.html#wp57013</span><br><span class="line">#dbms.logs.gc.options=-XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTime -XX:+PrintPromotionFailure -XX:+PrintTenuringDistribution</span><br><span class="line"></span><br><span class="line">#Number of GC logs to keep. 要保留的GC日志数</span><br><span class="line">#dbms.logs.gc.rotation.keep_number=5</span><br><span class="line"></span><br><span class="line">#Size of each GC log that is kept. 保留的每个GC日志文件的大小</span><br><span class="line">#dbms.logs.gc.rotation.size=20m</span><br><span class="line"></span><br><span class="line">#Size threshold for rotation of the debug log. If set to zero then no rotation will occur. Accepts a binary suffix &quot;k&quot;, &quot;m&quot; or &quot;g&quot;.  调试日志旋转的大小阈值。如果设置为零，则不会发生滚动(达到指定大小后切割日志文件)。接受二进制后缀“k”，“m”或“g”。</span><br><span class="line">#dbms.logs.debug.rotation.size=20m</span><br><span class="line"></span><br><span class="line">#Maximum number of history files for the internal log. 最多保存几个日志文件</span><br><span class="line">#dbms.logs.debug.rotation.keep_number=7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Miscellaneous configuration  其他配置</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#Enable this to specify a parser other than the default one. 启用此选项可指定除默认解析器之外的解析器</span><br><span class="line">#cypher.default_language_version=3.0</span><br><span class="line"></span><br><span class="line">#Determines if Cypher will allow using file URLs when loading data using `LOAD CSV`. Setting this value to `false` will cause Neo4j to fail `LOAD CSV` clauses that load data from the file system.    确定当使用加载数据时，Cypher是否允许使用文件URL `LOAD CSV`。将此值设置为`false`将导致Neo4j不能通过互联网上的URL导入数据，`LOAD CSV` 会从文件系统加载数据。</span><br><span class="line">dbms.security.allow_csv_import_from_file_urls=true</span><br><span class="line"></span><br><span class="line">#Retention policy for transaction logs needed to perform recovery and backups.  执行恢复和备份所需的事务日志的保留策略</span><br><span class="line">#dbms.tx_log.rotation.retention_policy=7 days</span><br><span class="line"></span><br><span class="line">#Enable a remote shell server which Neo4j Shell clients can log in to.  启用Neo4j Shell客户端可以登录的远程shell服务器</span><br><span class="line">dbms.shell.enabled=true</span><br><span class="line">#The network interface IP the shell will listen on (use 0.0.0.0 for all interfaces).</span><br><span class="line">dbms.shell.host=127.0.0.1</span><br><span class="line">#The port the shell will listen on, default is 1337.</span><br><span class="line">dbms.shell.port=1337</span><br><span class="line"></span><br><span class="line">#Only allow read operations from this Neo4j instance. This mode still requires write access to the directory for lock purposes.  只允许从Neo4j实例读取操作。此模式仍然需要对目录的写访问以用于锁定目的。</span><br><span class="line">#dbms.read_only=false</span><br><span class="line"></span><br><span class="line">#Comma separated list of JAX-RS packages containing JAX-RS resources, one package name for each mountpoint. The listed package names will be loaded under the mountpoints specified. Uncomment this line to mount the org.neo4j.examples.server.unmanaged.HelloWorldResource.java from neo4j-server-examples under /examples/unmanaged, resulting in a final URL of http://localhost:7474/examples/unmanaged/helloworld/&#123;nodeId&#125;      包含JAX-RS资源的JAX-RS软件包的逗号分隔列表，每个安装点一个软件包名称。所列出的软件包名称将在指定的安装点下加载。取消注释此行以装载org.neo4j.examples.server.unmanaged.HelloWorldResource.java neo4j-server-examples下/ examples / unmanaged，最终的URL为http//localhost7474/examples/unmanaged/helloworld/&#123;nodeId&#125;</span><br><span class="line">#dbms.unmanaged_extension_classes=org.neo4j.examples.server.unmanaged=/examples/unmanaged</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#JVM Parameters  JVM参数</span><br><span class="line"></span><br><span class="line">#G1GC generally strikes a good balance between throughput and tail latency, without too much tuning. G1GC通常在吞吐量和尾部延迟之间达到很好的平衡，而没有太多的调整。</span><br><span class="line">dbms.jvm.additional=-XX:+UseG1GC</span><br><span class="line"></span><br><span class="line">#Have common exceptions keep producing stack traces, so they can be debugged regardless of how often logs are rotated. 有共同的异常保持生成堆栈跟踪，所以他们可以被调试，无论日志被旋转的频率</span><br><span class="line">dbms.jvm.additional=-XX:-OmitStackTraceInFastThrow</span><br><span class="line"></span><br><span class="line">#Make sure that `initmemory` is not only allocated, but committed to the process, before starting the database. This reduces memory fragmentation, increasing the effectiveness of transparent huge pages. It also reduces the possibility of seeing performance drop due to heap-growing GC events, where a decrease in available page cache leads to an increase in mean IO response time. Try reducing the heap memory, if this flag degrades performance.    确保在启动数据库之前，“initmemory”不仅被分配，而且被提交到进程。这减少了内存碎片，增加了透明大页面的有效性。它还减少了由于堆增长的GC事件而导致性能下降的可能性，其中可用页面缓存的减少导致平均IO响应时间的增加。如果此标志降低性能，请减少堆内存。    </span><br><span class="line">dbms.jvm.additional=-XX:+AlwaysPreTouch</span><br><span class="line"></span><br><span class="line">#Trust that non-static final fields are really final. This allows more optimizations and improves overall performance. NOTE: Disable this if you use embedded mode, or have extensions or dependencies that may use reflection or serialization to change the value of final fields!    信任非静态final字段真的是final。这允许更多的优化和提高整体性能。注意：如果使用嵌入模式，或者有可能使用反射或序列化更改最终字段的值的扩展或依赖关系，请禁用此选项！</span><br><span class="line">dbms.jvm.additional=-XX:+UnlockExperimentalVMOptions</span><br><span class="line">dbms.jvm.additional=-XX:+TrustFinalNonStaticFields</span><br><span class="line"></span><br><span class="line">#Disable explicit garbage collection, which is occasionally invoked by the JDK itself.  禁用显式垃圾回收，这是偶尔由JDK本身调用。</span><br><span class="line">dbms.jvm.additional=-XX:+DisableExplicitGC</span><br><span class="line"></span><br><span class="line">#Remote JMX monitoring, uncomment and adjust the following lines as needed. Absolute paths to jmx.access and jmx.password files are required.  远程JMX监视，取消注释并根据需要调整以下行。需要jmx.access和jmx.password文件的绝对路径。</span><br><span class="line">#Also make sure to update the jmx.access and jmx.password files with appropriate permission roles and passwords, the shipped configuration contains only a read only role called &apos;monitor&apos; with password &apos;Neo4j&apos;. 还要确保使用适当的权限角色和密码更新jmx.access和jmx.password文件，所配置的配置只包含名为“monitor”的只读角色，密码为“Neo4j”。</span><br><span class="line">#For more details, see: http://download.oracle.com/javase/8/docs/technotes/guides/management/agent.html On Unix based systems the jmx.password file needs to be owned by the user that will run the server, and have permissions set to 0600. Unix系统，有关详情，请参阅：http：//download.oracle.com/javase/8/docs/technotes/guides/management/agent.html，jmx.password文件需要由运行服务器的用户拥有，并且权限设置为0600。</span><br><span class="line">#For details on setting these file permissions on Windows see: http://docs.oracle.com/javase/8/docs/technotes/guides/management/security-windows.html   Windows系统  有关在设置这些文件权限的详细信息，请参阅：http://docs.oracle.com/javase/8/docs/technotes/guides/management/security-windows.html</span><br><span class="line">#dbms.jvm.additional=-Dcom.sun.management.jmxremote.port=3637</span><br><span class="line">#dbms.jvm.additional=-Dcom.sun.management.jmxremote.authenticate=true</span><br><span class="line">#dbms.jvm.additional=-Dcom.sun.management.jmxremote.ssl=false</span><br><span class="line">#dbms.jvm.additional=-Dcom.sun.management.jmxremote.password.file=/absolute/path/to/conf/jmx.password</span><br><span class="line">#dbms.jvm.additional=-Dcom.sun.management.jmxremote.access.file=/absolute/path/to/conf/jmx.access</span><br><span class="line"></span><br><span class="line">#Some systems cannot discover host name automatically, and need this line configured:  某些系统无法自动发现主机名，需要配置以下行：</span><br><span class="line">#dbms.jvm.additional=-Djava.rmi.server.hostname=$THE_NEO4J_SERVER_HOSTNAME</span><br><span class="line"></span><br><span class="line">#Expand Diffie Hellman (DH) key size from default 1024 to 2048 for DH-RSA cipher suites used in server TLS handshakes. 对于服务器TLS握手中使用的DH-RSA密码套件，将Diffie Hellman（DH）密钥大小从默认1024展开到2048。</span><br><span class="line">#This is to protect the server from any potential passive eavesdropping. 这是为了保护服务器免受任何潜在的被动窃听。</span><br><span class="line">dbms.jvm.additional=-Djdk.tls.ephemeralDHKeySize=2048</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Wrapper Windows NT/2000/XP Service Properties  包装器Windows NT / 2000 / XP服务属性包装器Windows NT / 2000 / XP服务属性</span><br><span class="line"></span><br><span class="line">#WARNING - Do not modify any of these properties when an application using this configuration file has been installed as a service.  WARNING - 当使用此配置文件的应用程序已作为服务安装时，不要修改任何这些属性。</span><br><span class="line">#Please uninstall the service before modifying this section.  The service can then be reinstalled. 请在修改此部分之前卸载服务。 然后可以重新安装该服务。</span><br><span class="line"></span><br><span class="line">#Name of the service 服务的名称</span><br><span class="line">dbms.windows_service_name=neo4j</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Other Neo4j system properties  其他Neo4j系统属性</span><br><span class="line">dbms.jvm.additional=-Dunsupported.dbms.udc.source=zip</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/17/知识图谱/Neo4j的Python接口/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/17/知识图谱/Neo4j的Python接口/" class="post-title-link" itemprop="url">【转】Neo4j的Python接口</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-17 09:51:49 / 修改时间：09:57:27" itemprop="dateCreated datePublished" datetime="2019-07-17T09:51:49+08:00">2019-07-17</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/17/知识图谱/Neo4j的Python接口/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/17/知识图谱/Neo4j的Python接口/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>转自：<a href="https://blog.csdn.net/yangfengling1023/article/details/82049715" target="_blank" rel="noopener">python操作neo4j</a></p>
<p>1、安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install py2neo</span><br></pre></td></tr></table></figure>
<blockquote>
<p>报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ERROR: Cannot uninstall &apos;Pygments&apos;. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>但是再安装一次就成功了。。</p>
</blockquote>
<p>2、例子1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> py2neo <span class="keyword">import</span> Graph,Node,Relationship</span><br><span class="line"> </span><br><span class="line"><span class="comment">##连接neo4j数据库，输入地址、用户名、密码</span></span><br><span class="line">graph = Graph(<span class="string">'http://localhost:7474'</span>,username=<span class="string">'neo4j'</span>,password=<span class="string">'test'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">##创建结点</span></span><br><span class="line">test_node_1 = Node(label=<span class="string">'ru_yi_zhuan'</span>,name=<span class="string">'皇帝'</span>)</span><br><span class="line">test_node_2 = Node(label=<span class="string">'ru_yi_zhuan'</span>,name=<span class="string">'皇后'</span>)</span><br><span class="line">test_node_3 = Node(label=<span class="string">'ru_yi_zhuan'</span>,name=<span class="string">'公主'</span>)</span><br><span class="line">graph.create(test_node_1)</span><br><span class="line">graph.create(test_node_2)</span><br><span class="line">graph.create(test_node_3)</span><br><span class="line"> </span><br><span class="line"><span class="comment">##创建关系</span></span><br><span class="line"><span class="comment">#分别建立了test_node_1指向test_node_2和test_node_2指向test_node_1两条关系，关系的类型为"丈夫、妻子"，两条关系都有属性count，且值为1。</span></span><br><span class="line">node_1_zhangfu_node_1 = Relationship(test_node_1,<span class="string">'丈夫'</span>,test_node_2)</span><br><span class="line">node_1_zhangfu_node_1[<span class="string">'count'</span>] = <span class="number">1</span></span><br><span class="line">node_2_qizi_node_1 = Relationship(test_node_2,<span class="string">'妻子'</span>,test_node_1)</span><br><span class="line">node_2_munv_node_1 = Relationship(test_node_2,<span class="string">'母女'</span>,test_node_3)</span><br><span class="line"> </span><br><span class="line">node_2_qizi_node_1[<span class="string">'count'</span>] = <span class="number">1</span></span><br><span class="line"> </span><br><span class="line">graph.create(node_1_zhangfu_node_1)</span><br><span class="line">graph.create(node_2_qizi_node_1)</span><br><span class="line">graph.create(node_2_munv_node_1)</span><br><span class="line"> </span><br><span class="line">print(graph)</span><br><span class="line">print(test_node_1)</span><br><span class="line">print(test_node_2)</span><br><span class="line">print(node_1_zhangfu_node_1)</span><br><span class="line">print(node_2_qizi_node_1)</span><br><span class="line">print(node_2_munv_node_1)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/16/知识图谱/Neo4j问题汇总/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/16/知识图谱/Neo4j问题汇总/" class="post-title-link" itemprop="url">Neo4j问题汇总</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-16 15:55:43" itemprop="dateCreated datePublished" datetime="2019-07-16T15:55:43+08:00">2019-07-16</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 08:51:02" itemprop="dateModified" datetime="2019-07-19T08:51:02+08:00">2019-07-19</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/16/知识图谱/Neo4j问题汇总/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/16/知识图谱/Neo4j问题汇总/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="无法登陆问题"><a href="#无法登陆问题" class="headerlink" title="无法登陆问题"></a>无法登陆问题</h1><p>转自：<a href="https://blog.csdn.net/weixin_39198406/article/details/85068102" target="_blank" rel="noopener">访问Neo4j验证失败（The client is unauthorized due to authentication failure.）</a></p>
<p>报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The client is unauthorized due to authentication failure.</span><br></pre></td></tr></table></figure>
<p>如果你有在浏览器上登录不同的neo4j数据库，很可能是由于缓存没有清理掉导致的。<br>可以试试无痕浏览来访问neo4j的web页面。<br>另外有还有两种解决方案：</p>
<p>1、停止neo4j服务，并且删除data/dbms/目录，重新启动，然后在无痕浏览中登陆。此时用默认密码neo4j登陆，再修改密码。</p>
<p>或者</p>
<p>2、修改neo4j.conf配置文件，取消验证机制，修改如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dbms.security.auth_enabled=false</span><br></pre></td></tr></table></figure>
<h1 id="启动服务报错role-is-not-unique"><a href="#启动服务报错role-is-not-unique" class="headerlink" title="启动服务报错role is not unique"></a>启动服务报错role is not unique</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR Failed to start Neo4j: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@72ab05ed&apos; was successfully initialized, but failed to start. Please see the attached cause exception &quot;The PropertyKey &quot;role&quot; is not unique, it existed with id=0 before being added with id=1.&quot;. Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@72ab05ed&apos; was successfully initialized, but failed to start. Please see the attached cause exception &quot;The PropertyKey &quot;role&quot; is not unique, it existed with id=0 before being added with id=1.&quot;.</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/10/知识图谱/Spark写入Neo4j/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/10/知识图谱/Spark写入Neo4j/" class="post-title-link" itemprop="url">【转】Spark写入Neo4j</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-10 09:05:36" itemprop="dateCreated datePublished" datetime="2019-07-10T09:05:36+08:00">2019-07-10</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-17 16:45:20" itemprop="dateModified" datetime="2019-07-17T16:45:20+08:00">2019-07-17</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/10/知识图谱/Spark写入Neo4j/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/10/知识图谱/Spark写入Neo4j/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="插入GraphX的数据"><a href="#插入GraphX的数据" class="headerlink" title="插入GraphX的数据"></a>插入GraphX的数据</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.neo4j.spark.<span class="type">Neo4jGraph</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.graphx.&#123;<span class="type">Edge</span>, <span class="type">Graph</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@transient</span></span><br><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"XX"</span>).setMaster(<span class="string">"local[1]"</span>)</span><br><span class="line">conf.set(<span class="string">"spark.neo4j.bolt.url"</span>,<span class="string">"bolt://localhost:7687"</span>)</span><br><span class="line">conf.set(<span class="string">"spark.neo4j.bolt.user"</span>,<span class="string">"neo4j"</span>)</span><br><span class="line">conf.set(<span class="string">"spark.neo4j.bolt.password"</span>,<span class="string">"mljr123"</span>)</span><br><span class="line"><span class="meta">@transient</span></span><br><span class="line"><span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> vertices = <span class="type">Array</span>((<span class="number">1</span>L, <span class="string">"SFO"</span>), (<span class="number">2</span>L, <span class="string">"ORD"</span>), (<span class="number">3</span>L, <span class="string">"DFW"</span>), (<span class="number">4</span>L, <span class="string">"DEL"</span>))</span><br><span class="line"><span class="keyword">val</span> vRDD = sc.parallelize(vertices)</span><br><span class="line"><span class="keyword">val</span> edges = <span class="type">Array</span>(<span class="type">Edge</span>(<span class="number">1</span>L, <span class="number">2</span>L, <span class="number">1800</span>), <span class="type">Edge</span>(<span class="number">2</span>L, <span class="number">3</span>L, <span class="number">800</span>), <span class="type">Edge</span>(<span class="number">3</span>L, <span class="number">1</span>L, <span class="number">1400</span>), <span class="type">Edge</span>(<span class="number">4</span>L, <span class="number">1</span>L, <span class="number">25000</span>))</span><br><span class="line"><span class="keyword">val</span> eRDD = sc.parallelize(edges)</span><br><span class="line"><span class="keyword">val</span> graph = <span class="type">Graph</span>(vRDD, eRDD)</span><br><span class="line">graph.triplets.foreach(trip =&gt; println(trip))</span><br><span class="line"><span class="type">Neo4jGraph</span>.saveGraph(sc, graph, <span class="string">"Place"</span>, <span class="string">"Distance"</span>)</span><br><span class="line"></span><br><span class="line">println(<span class="string">"saved"</span>)</span><br><span class="line"></span><br><span class="line">sc.stop()</span><br></pre></td></tr></table></figure>
<h1 id="用Cypher语句插入"><a href="#用Cypher语句插入" class="headerlink" title="用Cypher语句插入"></a>用Cypher语句插入</h1><p>转自：<a href="https://mkdev.me/en/posts/introduction-to-graphs-and-neo4j-graph-processing-in-spark" target="_blank" rel="noopener">Introduction to graphs and Neo4j. Graph processing in Spark</a></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.spark.examples.streaming</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.&#123;<span class="type">Seconds</span>, <span class="type">StreamingContext</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.<span class="type">StreamingContext</span>._</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span>._</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.twitter._</span><br><span class="line"><span class="comment">// yes, sure, Eclipse would refactor this all, but I'm on Vim</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.twitter.<span class="type">TwitterUtils</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.storage.<span class="type">StorageLevel</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkConf</span></span><br><span class="line"><span class="keyword">import</span> org.neo4j.driver.v1._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Twittoneo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">    <span class="type">StreamingExamples</span>.setStreamingLogLevels()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// and here I firstly put the keys:)</span></span><br><span class="line">    <span class="type">System</span>.setProperty(<span class="string">"twitter4j.oauth.consumerKey"</span>, <span class="string">"tFwPvX5s"</span>)</span><br><span class="line">    <span class="type">System</span>.setProperty(<span class="string">"twitter4j.oauth.consumerSecret"</span>, <span class="string">"KQvGuGColS12k6Mer45jnsxI"</span>)</span><br><span class="line">    <span class="type">System</span>.setProperty(<span class="string">"twitter4j.oauth.accessToken"</span>, <span class="string">"113404896-O323jjsnI6mi2o6radP"</span>)</span><br><span class="line">    <span class="type">System</span>.setProperty(<span class="string">"twitter4j.oauth.accessTokenSecret"</span>, <span class="string">"pkyl20ZjhtbtMnX"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"Twitter2Neo4j"</span>)</span><br><span class="line">    <span class="keyword">val</span> ssc = <span class="keyword">new</span> <span class="type">StreamingContext</span>(sparkConf, <span class="type">Seconds</span>(<span class="number">5</span>))</span><br><span class="line">    <span class="keyword">val</span> stream = <span class="type">TwitterUtils</span>.createStream(ssc, <span class="type">None</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> actData = stream.map(status =&gt; &#123;</span><br><span class="line">      <span class="comment">// extract from twitter json only interesting fields</span></span><br><span class="line">      <span class="keyword">val</span> author:<span class="type">String</span> = status.getUser.getScreenName.replaceAll(<span class="string">"_"</span>, <span class="string">"UNDERSCORE"</span>)</span><br><span class="line">      <span class="keyword">val</span> ments:<span class="type">Array</span>[<span class="type">String</span>] = status.getUserMentionEntities.map(x =&gt; &#123;</span><br><span class="line">                                           x.getScreenName.replaceAll(<span class="string">"_"</span>, <span class="string">"UNDERSCORE"</span>)</span><br><span class="line">                                       &#125;)</span><br><span class="line">      (author, ments)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    actData.foreachRDD(rdd =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span>(!rdd.isEmpty())    &#123;</span><br><span class="line">        println(<span class="string">"Open connection to Neo4jdb"</span>)</span><br><span class="line">        <span class="keyword">val</span> driver = <span class="type">GraphDatabase</span>.driver( <span class="string">"bolt://localhost"</span>,</span><br><span class="line">                                           <span class="type">AuthTokens</span>.basic( <span class="string">"neo4j"</span>, <span class="string">"neo4j"</span> ))</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// collect called for execute all logic on driver</span></span><br><span class="line">            <span class="comment">// http://spark.apache.org/docs/latest/cluster-overview.html</span></span><br><span class="line">            rdd.collect().foreach(x =&gt;&#123;</span><br><span class="line">              x._2.foreach( target =&gt;&#123;</span><br><span class="line">                  <span class="keyword">val</span> session = driver.session()</span><br><span class="line">                  <span class="comment">// create relation if not exist</span></span><br><span class="line">                  <span class="comment">// merge (p:twivi13 &#123;id: 'twivi13'&#125;)</span></span><br><span class="line">                  <span class="comment">// merge (n:Real &#123;id:'Real'&#125;)</span></span><br><span class="line">                  <span class="comment">// create unique (p)-[r:rel &#123;weidth: 0&#125;]-(n) return r</span></span><br><span class="line">                  <span class="comment">//</span></span><br><span class="line">                  <span class="comment">// pregix 'twi' and replacement _ to UNDESCORE require because Neo4j has many restrictions for label</span></span><br><span class="line">                  <span class="keyword">val</span> relation = <span class="string">"MERGE (p:twi"</span>+ x._1+<span class="string">" &#123;id:'twi"</span>+x._1+<span class="string">"'&#125;) MERGE (d:twi"</span>+ target+<span class="string">" &#123;id: 'twi"</span> + target + <span class="string">"'&#125;) CREATE UNIQUE (p)-[r:rel &#123;weight: 0&#125;]-(d) RETURN 1"</span></span><br><span class="line">                  println(relation)</span><br><span class="line">                  <span class="keyword">val</span> result1 = session.run(relation)</span><br><span class="line">                  result1.consume().counters().nodesCreated();</span><br><span class="line">                  session.close()</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            driver.close()</span><br><span class="line">            println(<span class="string">"Close Neo4j connection"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        driver.close()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>要collect再写入，那就效率不高了。</p>
<p>参考</p>
<p><a href="https://blog.csdn.net/BlackArmand/article/details/87903973" target="_blank" rel="noopener">大数据Spark结合图数据库Neo4j设计架构</a></p>
<p><a href="https://medium.com/data-science-school/practical-apache-spark-in-10-minutes-part-7-graphx-and-neo4j-b6b01cffa4fd" target="_blank" rel="noopener">Practical Apache Spark in 10 minutes. Part 7 — GraphX and Neo4j</a> 读取到GraphX</p>
<p><a href="https://www.jianshu.com/p/8bef80b9acfc" target="_blank" rel="noopener">neo4j与spark 的结合</a> 读取到GraphX</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/09/知识图谱/JanusGraph介绍/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/09/知识图谱/JanusGraph介绍/" class="post-title-link" itemprop="url">【转】JanusGraph介绍</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-09 10:10:25 / 修改时间：16:31:48" itemprop="dateCreated datePublished" datetime="2019-07-09T10:10:25+08:00">2019-07-09</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/09/知识图谱/JanusGraph介绍/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/09/知识图谱/JanusGraph介绍/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JanusGraph相关文章"><a href="#JanusGraph相关文章" class="headerlink" title="JanusGraph相关文章"></a>JanusGraph相关文章</h1><p>待看文章</p>
<p><a href="https://blog.csdn.net/O_n_O_/article/details/82706542" target="_blank" rel="noopener">JanusGraph 诸神图示例</a></p>
<p><a href="https://blog.csdn.net/weixin_33890499/article/details/87429649" target="_blank" rel="noopener">Janusgraph Spark yarn-client模式批量导入配置</a></p>
<p><a href="https://blog.csdn.net/liliang199/article/details/78111053" target="_blank" rel="noopener">Titan/JanusGraph的Hadoop-Gremlin批量数据导入注意事项</a></p>
<p><a href="https://blog.csdn.net/wzwdcld/article/details/82083456" target="_blank" rel="noopener">JanusGraph各组件版本兼容性匹配表</a></p>
<p><a href="https://www.jianshu.com/p/09d0ae1bc621" target="_blank" rel="noopener">janusgraph gremlin-hadoop spark on yarn数据导入</a></p>
<p><a href="https://blog.csdn.net/qq_37286005/article/details/85071050" target="_blank" rel="noopener">JanusGraph0.3.1 OLAP开发环境搭建</a></p>
<p><a href="[https://www.imbajin.com/2018-04-13-IDEA%E4%B8%8B%E5%BC%80%E5%8F%91Janus%E7%9A%84%E7%8E%AF%E5%A2%83/](https://www.imbajin.com/2018-04-13-IDEA下开发Janus的环境/">JanusGraph开发环境大整合</a>)</p>
<h1 id="JanusGraph简介"><a href="#JanusGraph简介" class="headerlink" title="JanusGraph简介**"></a>JanusGraph简介**</h1><p>JanusGraph是一个开源的分布式图数据库。它具有很好的扩展性，通过多机集群可支持存储和查询数百亿的顶点和边的图数据。JanusGraph是一个事务数据库，支持大量用户高并发地执行复杂的实时图遍历。它提供了如下特性：</p>
<ul>
<li>支持数据和用户增长的弹性和线性扩展;</li>
<li>通过数据分发和复制来提过性能和容错;</li>
<li>支持多数据中心的高可用和热备份;</li>
<li>支持ACID 和最终一致性;</li>
<li>支持多种后端存储<ul>
<li>Apache Cassandra</li>
<li>Apache HBase</li>
<li>Google Cloud Bigtable</li>
<li>Oracle BerkeleyDB(仅供测试环境)</li>
</ul>
</li>
<li>支持全局的图数据分析，报表以及和如下大数据平台的ETL集成：<ul>
<li>Apache Spark</li>
<li>Apache Giraph</li>
<li>Apache Hadoop</li>
</ul>
</li>
<li>支持geo, 数值范围以及通过如下工具进行全文检索：<ul>
<li>ElasticSearch</li>
<li>Apache Solr</li>
<li>Apache Lucene</li>
</ul>
</li>
<li>支持与Apache TinkerPop图栈进行原生集成：<ul>
<li>Gremlin 图查询语言</li>
<li>Gremlin 图服务器</li>
<li>Gremlin 应用</li>
</ul>
</li>
<li>可以通过如下工具来可视化存储在JanusGraph中的图数据：<ul>
<li>Cytoscape</li>
<li>Apache TinkerPop的Gephi插件</li>
<li>Graphexp</li>
<li>KeyLines by Cambridge Intelligence</li>
<li>Linkurious</li>
</ul>
</li>
</ul>
<p>参考：</p>
<p><a href="https://blog.csdn.net/gobitan/article/details/80939224" target="_blank" rel="noopener">图数据库JanusGraph介绍及使用(一)：简介</a></p>
<p><a href="https://blog.csdn.net/gobitan/article/details/80939276" target="_blank" rel="noopener">图数据库JanusGraph介绍及使用(二)：架构</a></p>
<p><a href="https://blog.csdn.net/gobitan/article/details/81068459" target="_blank" rel="noopener">图数据库JanusGraph介绍及使用(三)：安装与初步使用</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/09/知识图谱/JanusGraph特性/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/09/知识图谱/JanusGraph特性/" class="post-title-link" itemprop="url">【转】了解JanusGraph</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-09 09:13:48 / 修改时间：14:18:27" itemprop="dateCreated datePublished" datetime="2019-07-09T09:13:48+08:00">2019-07-09</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/09/知识图谱/JanusGraph特性/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/09/知识图谱/JanusGraph特性/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JanusGraph特性"><a href="#JanusGraph特性" class="headerlink" title="JanusGraph特性"></a>JanusGraph特性</h1><p>开源图数据库Titan项目已经停止更新，JanusGraph可以说复活了Titan项目，到目前为止，JanusGraph与Titan在核心机制上相差不大。JanusGraph/Titan有如下关键设计：</p>
<ol>
<li><p>支持<strong>大规模图数据存储</strong>，Titan图数据库是建立在分布式集群上，数据存储容量和集群节点数量成正比</p>
</li>
<li><p>支持<strong>弹性和线性扩展</strong>，<strong>高可用</strong>，<strong>高容错</strong></p>
</li>
<li><p>支持<strong>Gremlin</strong>图查询语言</p>
</li>
<li><p>支持利用<strong>Hadoop计算框架</strong>对图数据进行分析</p>
</li>
<li><p>支持外部<strong>索引</strong>：ElasticSearch、Solr、Lucene</p>
</li>
<li><p>支持<strong>多储存引擎</strong>：Cassandra、HBase、Berkeley DB和InMemory模式;</p>
</li>
<li><p>基于Apache License 2.0</p>
</li>
</ol>
<h1 id="与Neo4j的对比"><a href="#与Neo4j的对比" class="headerlink" title="与Neo4j的对比"></a>与Neo4j的对比</h1><p><a href="https://db-engines.com/en/system/JanusGraph%3BNeo4j" target="_blank" rel="noopener">https://db-engines.com/en/system/JanusGraph%3BNeo4j</a></p>
<p><a href="https://www.cnblogs.com/miracle9527/p/10563241.html" target="_blank" rel="noopener">https://www.cnblogs.com/miracle9527/p/10563241.html</a></p>
<p><img src="//schwimmer.github.io/2019/07/09/知识图谱/JanusGraph特性/image-20190709115143679-2644303.png" alt="image-20190709115143679"></p>
<p><img src="//schwimmer.github.io/2019/07/09/知识图谱/JanusGraph特性/image-20190709115153987-2644314.png" alt="image-20190709115153987"></p>
<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><p>同大多数图数据库一样，JanusGraph采用<strong>属性图</strong>进行建模。基于属性图的模型，JanusGraph有如下基本概念：</p>
<p><strong>Vertex Label</strong>：节点的类型，用于表示现实世界中的实体类型，比如”人”，“车”。在JanusGraph中，每一个节点有且只有一个Vertex Label。当不显式指定Vertex Label时，采用默认的Vertex Label。</p>
<p><strong>Vertex</strong>：节点/顶点，用于表示现实世界中的实体对象。</p>
<p><strong>Edge Label</strong>：边的类型，用于表示现实世界中的关系类型，比如“通话关系”，“转账关系”，“微博关注关系”等；</p>
<p><strong>Edge</strong>: 边，用于表示一个个具体的联系。JanusGraph的边都是单向边。如果需要双向边，则通过两条相反方向的单向边组成。JanusGraph不存在无向边。</p>
<p><strong>Property Key</strong>：属性的类型，比如“姓名”，“年龄”，“时间”等。Property Key有Cardinality的概念。Cardinality有SINGLE、LIST和SET三种选项。这三种选项分别用于表示一个Property中，对于同一个Property Key是只允许有一个值、允许多个可重复的值，还是多个不可重复的值。</p>
<p><strong>Property</strong>：属性，用于表示一个个具体的附加信息，采用Key-Value结构。Key就是Property Key，Value就是具体的值。</p>
<h1 id="属性图举例"><a href="#属性图举例" class="headerlink" title="属性图举例"></a>属性图举例</h1><p>张三与李四是同事关系，他们从2017年开始成为同事，用属性图表达：</p>
<p><img src="//schwimmer.github.io/2019/07/09/知识图谱/JanusGraph特性/1620.jpeg" alt="img"></p>
<p>参考</p>
<p><a href="https://cloud.tencent.com/developer/news/206999" target="_blank" rel="noopener">图解JanusGraph内部数据存储结构</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://schwimmer.github.io/2019/07/08/知识图谱/基于Neo4j的推荐系统/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Schwimmer">
      <meta itemprop="description" content="Record and Think!">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Schwimmer's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/08/知识图谱/基于Neo4j的推荐系统/" class="post-title-link" itemprop="url">【转】基于Neo4j的推荐系统</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-08 18:05:37" itemprop="dateCreated datePublished" datetime="2019-07-08T18:05:37+08:00">2019-07-08</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-09 16:34:40" itemprop="dateModified" datetime="2019-07-09T16:34:40+08:00">2019-07-09</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/知识图谱/" itemprop="url" rel="index"><span itemprop="name">知识图谱</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/07/08/知识图谱/基于Neo4j的推荐系统/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/07/08/知识图谱/基于Neo4j的推荐系统/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h1><p>从官网获取电影数据库<a href="https://neo4j.com/sandbox-v2/。登录后会有这样的页面" target="_blank" rel="noopener">https://neo4j.com/sandbox-v2/。登录后会有这样的页面</a></p>
<p><img src="//schwimmer.github.io/2019/07/08/知识图谱/基于Neo4j的推荐系统/image-20190708181016878-2580616.png" alt="image-20190708181016878"></p>
<p>选择右边这个推荐系统的。然后给了这样的链接：<a href="https://10-0-1-218-33967.neo4jsandbox.com/browser/" target="_blank" rel="noopener">https://10-0-1-218-33967.neo4jsandbox.com/browser/</a></p>
<p>进入后就是一个Neo4j的web端，包含了完整的数据</p>
<p><img src="//schwimmer.github.io/2019/07/08/知识图谱/基于Neo4j的推荐系统/image-20190708181404085-2580844.png" alt="image-20190708181404085"></p>
<p>跑一个简单查询测试一下数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">match (n) return n limit 10</span><br></pre></td></tr></table></figure>
<p>返回<img src="//schwimmer.github.io/2019/07/08/知识图谱/基于Neo4j的推荐系统/image-20190708182348928-2581428.png" alt="image-20190708182348928"></p>
<h1 id="基于内容的过滤"><a href="#基于内容的过滤" class="headerlink" title="基于内容的过滤"></a>基于内容的过滤</h1><p><strong>基于内容的过滤</strong>(<strong>Content-based filtering</strong>)：该技术通过比较商品之间的相似性或者相关性进行推荐。这种方式忽略用户的购买行为，只考虑商品之间的相似关系。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MATCH p=(m:Movie &#123;title: &quot;Net, The&quot;&#125;)-[:ACTED_IN|:IN_GENRE|:DIRECTED*2]-()</span><br><span class="line">RETURN p LIMIT 25</span><br></pre></td></tr></table></figure>
<p>Cypher 语句的意思是：找出25条记录，该记录满足以下条件之一：</p>
<ol>
<li><p>该记录中的电影和电影m 有相同的流派（IN_GENRE）</p>
</li>
<li><p>出演过电影m的演员，出演过该电影（ACTED_IN）</p>
</li>
<li><p>执导过电影m的导演，执导过该电影（DIRECTED）</p>
</li>
</ol>
<p>注意：此语句返回的记录P，<strong>是一条关系链，并不仅仅是某一部电影</strong>。</p>
<p>另外，关系的运算，用到了 | 表示或。:DIRECTED<em>2 中的 </em>2 表示关系长度为2的关系。</p>
<p>参考</p>
<p><a href="https://blog.csdn.net/lovehouye/article/details/83024823" target="_blank" rel="noopener">Neo4j 做推荐 （1）—— 基础数据</a></p>
<p><a href="https://blog.csdn.net/lovehouye/article/details/83026113" target="_blank" rel="noopener">Neo4j 做推荐 （2）—— 基于内容的过滤</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Schwimmer</p>
              <div class="site-description motion-element" itemprop="description">Record and Think!</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">319</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">63</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Schwimmer</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.2.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    
      <div>
        
  <script>
    window._bd_share_config = {
      "common": {
        "bdText": "",
        "bdMini": "1",
        "bdMiniList": false,
        "bdPic": ""
      },
      "image": {
        "viewList": ["tsina", "douban", "sqq", "qzone", "weixin", "twi", "fbook"],
        "viewText": "分享到：",
        "viewSize": "16"
      },
      "slide": {
        "bdImg": "5",
        "bdPos": "left",
        "bdTop": "100"
      }
    }
  </script>

<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      </div>
    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  
  
<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://https-schwimmer-github-io.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>







  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

    
  


  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
